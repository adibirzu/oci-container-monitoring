{
  "version": 4,
  "terraform_version": "1.8.4",
  "serial": 35,
  "lineage": "45ad8e27-2ae2-a6e1-0932-dd5991119510",
  "outputs": {
    "agent_install_script_path": {
      "value": "./output/install-agent.sh",
      "type": "string"
    },
    "container_instance_console_url": {
      "value": "https://cloud.oracle.com/compute/container-instances/ocid1.computecontainerinstance.oc1.eu-frankfurt-1.antheljrttkvkkiaea6b3w2gvm2f2d4roaaevwk3dpj5fd7tj4sckak6zk7a?region=eu-frankfurt-1",
      "type": "string"
    },
    "container_instance_dynamic_group_id": {
      "value": "ocid1.dynamicgroup.oc1..aaaaaaaaqswmk6bi5hkxto3fh6zvykyqtfvprl7np7f4cyexldmx5xq7kmzq",
      "type": "string"
    },
    "container_instance_id": {
      "value": "ocid1.computecontainerinstance.oc1.eu-frankfurt-1.antheljrttkvkkiaea6b3w2gvm2f2d4roaaevwk3dpj5fd7tj4sckak6zk7a",
      "type": "string"
    },
    "container_instance_name": {
      "value": "monitoring-demo",
      "type": "string"
    },
    "container_instance_state": {
      "value": "ACTIVE",
      "type": "string"
    },
    "container_private_ip": {
      "value": "10.0.0.92",
      "type": "string"
    },
    "container_public_ip": {
      "value": "141.147.51.33",
      "type": "string"
    },
    "deployment_summary": {
      "value": {
        "alarms": null,
        "container_instance": {
          "id": "ocid1.computecontainerinstance.oc1.eu-frankfurt-1.antheljrttkvkkiaea6b3w2gvm2f2d4roaaevwk3dpj5fd7tj4sckak6zk7a",
          "name": "monitoring-demo",
          "private_ip": "10.0.0.92",
          "public_ip": "141.147.51.33",
          "state": "ACTIVE"
        },
        "logging": null,
        "management_agent": {
          "config_files_path": "./output",
          "install_key_id": "ocid1.managementagentinstallkey.oc1.eu-frankfurt-1.amaaaaaattkvkkiahbexff7xhpgnohakojieecaiisnrxvliar7mfsqki6wa"
        }
      },
      "type": [
        "object",
        {
          "alarms": [
            "object",
            {
              "cpu_alarm": "dynamic",
              "memory_alarm": "dynamic"
            }
          ],
          "container_instance": [
            "object",
            {
              "id": "string",
              "name": "string",
              "private_ip": "string",
              "public_ip": "string",
              "state": "string"
            }
          ],
          "logging": [
            "object",
            {
              "application_log": "dynamic",
              "log_group_id": "dynamic",
              "system_log": "dynamic"
            }
          ],
          "management_agent": [
            "object",
            {
              "config_files_path": "string",
              "install_key_id": "string"
            }
          ]
        }
      ]
    },
    "management_agent_install_key": {
      "value": "Mi4wLGV1LWZyYW5rZnVydC0xLG9jaWQxLnRlbmFuY3kub2MxLi5hYWFhYWFhYXh6cHhiY2FnN3pnYW1oMmVybGdncXJvM3k2M3R2bTJyYmtrano0ejJ6c2t2YWd1cGl6N2Esb2NpZDEubWFuYWdlbWVudGFnZW50aW5zdGFsbGtleS5vYzEuZXUtZnJhbmtmdXJ0LTEuYW1hYWFhYWF0dGt2a2tpYWhiZXhmZjd4aHBnbm9oYWtvamllZWNhaWlzbnJ4dmxpYXI3bWZzcWtpNndhLElBOVZYVnF1RFlRc1pMODFETVloaWsxZ2x0MllJYjlta1NRU0w2alo=",
      "type": "string",
      "sensitive": true
    },
    "management_agent_install_key_id": {
      "value": "ocid1.managementagentinstallkey.oc1.eu-frankfurt-1.amaaaaaattkvkkiahbexff7xhpgnohakojieecaiisnrxvliar7mfsqki6wa",
      "type": "string"
    },
    "monitoring_console_url": {
      "value": "https://cloud.oracle.com/monitoring/alarms?region=eu-frankfurt-1\u0026compartmentId=ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
      "type": "string"
    },
    "prometheus_config_path": {
      "value": "./output/prometheus-config.yml",
      "type": "string"
    }
  },
  "resources": [
    {
      "module": "module.container_instance",
      "mode": "data",
      "type": "oci_container_instances_container_instance",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/oci\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "availability_domain": "NoEK:EU-FRANKFURT-1-AD-1",
            "compartment_id": "ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
            "container_count": 4,
            "container_instance_id": "ocid1.computecontainerinstance.oc1.eu-frankfurt-1.antheljrttkvkkiaea6b3w2gvm2f2d4roaaevwk3dpj5fd7tj4sckak6zk7a",
            "container_restart_policy": "ALWAYS",
            "containers": [
              {
                "arguments": [],
                "availability_domain": "NoEK:EU-FRANKFURT-1-AD-1",
                "command": [],
                "compartment_id": "ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
                "container_id": "ocid1.computecontainer.oc1.eu-frankfurt-1.antheljrttkvkkiathbi4mvx7vkzs6yvwnsyiw2yfsgh6om6kdycvxbf6naa",
                "container_instance_id": "ocid1.computecontainerinstance.oc1.eu-frankfurt-1.antheljrttkvkkiaea6b3w2gvm2f2d4roaaevwk3dpj5fd7tj4sckak6zk7a",
                "defined_tags": {
                  "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle-Standard.CostCenter": "Specialists",
                  "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle_Tags.CreatedOn": "2025-10-28T11:12:08.133Z"
                },
                "display_name": "monitoring-demo-app",
                "environment_variables": {},
                "exit_code": 0,
                "fault_domain": "",
                "freeform_tags": {
                  "CreatedDate": "2025-10-28",
                  "Environment": "Development",
                  "ManagedBy": "Terraform",
                  "Project": "OCI-Container-Monitoring",
                  "Terraform": "true"
                },
                "health_checks": [
                  {
                    "failure_action": "KILL",
                    "failure_threshold": 3,
                    "headers": [],
                    "health_check_type": "HTTP",
                    "initial_delay_in_seconds": 0,
                    "interval_in_seconds": 30,
                    "name": "healthCheck0",
                    "path": "/",
                    "port": 80,
                    "status": "HEALTHY",
                    "status_details": "",
                    "success_threshold": 1,
                    "timeout_in_seconds": 10
                  }
                ],
                "image_url": "nginx:latest",
                "is_resource_principal_disabled": false,
                "lifecycle_details": "CONTAINER_RUNNING",
                "resource_config": [
                  {
                    "memory_limit_in_gbs": 3.200000047683716,
                    "vcpus_limit": 0.800000011920929
                  }
                ],
                "security_context": [
                  {
                    "capabilities": [],
                    "is_non_root_user_check_enabled": false,
                    "is_root_file_system_readonly": false,
                    "run_as_group": 0,
                    "run_as_user": 0,
                    "security_context_type": "LINUX"
                  }
                ],
                "state": "ACTIVE",
                "system_tags": {},
                "time_created": "2025-10-28 11:12:08.437 +0000 UTC",
                "time_terminated": "",
                "time_updated": "2025-10-28 11:12:53.703 +0000 UTC",
                "volume_mounts": [],
                "working_directory": ""
              },
              {
                "arguments": [
                  "--port=8080",
                  "--housekeeping_interval=10s",
                  "--docker_only=true",
                  "--store_container_labels=false"
                ],
                "availability_domain": "NoEK:EU-FRANKFURT-1-AD-1",
                "command": [],
                "compartment_id": "ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
                "container_id": "ocid1.computecontainer.oc1.eu-frankfurt-1.antheljrttkvkkiaqsnzqfdwirkos5sodgv3okwdaiwo4ko6bgiiuxkqvidq",
                "container_instance_id": "ocid1.computecontainerinstance.oc1.eu-frankfurt-1.antheljrttkvkkiaea6b3w2gvm2f2d4roaaevwk3dpj5fd7tj4sckak6zk7a",
                "defined_tags": {
                  "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle-Standard.CostCenter": "Specialists",
                  "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle_Tags.CreatedOn": "2025-10-28T11:12:08.133Z"
                },
                "display_name": "monitoring-demo-cadvisor",
                "environment_variables": {},
                "exit_code": 0,
                "fault_domain": "",
                "freeform_tags": {
                  "CreatedDate": "2025-10-28",
                  "Environment": "Development",
                  "ManagedBy": "Terraform",
                  "Project": "OCI-Container-Monitoring",
                  "Terraform": "true"
                },
                "health_checks": [
                  {
                    "failure_action": "KILL",
                    "failure_threshold": 3,
                    "headers": [],
                    "health_check_type": "HTTP",
                    "initial_delay_in_seconds": 0,
                    "interval_in_seconds": 30,
                    "name": "healthCheck0",
                    "path": "/metrics",
                    "port": 8080,
                    "status": "HEALTHY",
                    "status_details": "",
                    "success_threshold": 1,
                    "timeout_in_seconds": 10
                  }
                ],
                "image_url": "gcr.io/cadvisor/cadvisor:latest",
                "is_resource_principal_disabled": false,
                "lifecycle_details": "CONTAINER_RUNNING",
                "resource_config": [
                  {
                    "memory_limit_in_gbs": 0.5,
                    "vcpus_limit": 0.10000000149011612
                  }
                ],
                "security_context": [
                  {
                    "capabilities": [],
                    "is_non_root_user_check_enabled": false,
                    "is_root_file_system_readonly": false,
                    "run_as_group": 0,
                    "run_as_user": 0,
                    "security_context_type": "LINUX"
                  }
                ],
                "state": "ACTIVE",
                "system_tags": {},
                "time_created": "2025-10-28 11:12:08.441 +0000 UTC",
                "time_terminated": "",
                "time_updated": "2025-10-28 11:12:53.696 +0000 UTC",
                "volume_mounts": [],
                "working_directory": ""
              },
              {
                "arguments": [
                  "--path.rootfs=/host",
                  "--path.procfs=/host/proc",
                  "--path.sysfs=/host/sys",
                  "--collector.filesystem.mount-points-exclude=^/(sys|proc|dev|host|etc)($$|/)"
                ],
                "availability_domain": "NoEK:EU-FRANKFURT-1-AD-1",
                "command": [],
                "compartment_id": "ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
                "container_id": "ocid1.computecontainer.oc1.eu-frankfurt-1.antheljrttkvkkialkpvqgtdwmwtebv4biffsqqjpy5rvlqcs5yyihknlm7q",
                "container_instance_id": "ocid1.computecontainerinstance.oc1.eu-frankfurt-1.antheljrttkvkkiaea6b3w2gvm2f2d4roaaevwk3dpj5fd7tj4sckak6zk7a",
                "defined_tags": {
                  "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle-Standard.CostCenter": "Specialists",
                  "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle_Tags.CreatedOn": "2025-10-28T11:12:08.133Z"
                },
                "display_name": "monitoring-demo-node-exporter",
                "environment_variables": {},
                "exit_code": 2,
                "fault_domain": "",
                "freeform_tags": {
                  "CreatedDate": "2025-10-28",
                  "Environment": "Development",
                  "ManagedBy": "Terraform",
                  "Project": "OCI-Container-Monitoring",
                  "Terraform": "true"
                },
                "health_checks": [
                  {
                    "failure_action": "KILL",
                    "failure_threshold": 3,
                    "headers": [],
                    "health_check_type": "HTTP",
                    "initial_delay_in_seconds": 0,
                    "interval_in_seconds": 30,
                    "name": "healthCheck0",
                    "path": "/metrics",
                    "port": 9100,
                    "status": "UNKNOWN",
                    "status_details": "Health check is just created",
                    "success_threshold": 1,
                    "timeout_in_seconds": 10
                  }
                ],
                "image_url": "prom/node-exporter:latest",
                "is_resource_principal_disabled": false,
                "lifecycle_details": "CONTAINER_TERMINATED",
                "resource_config": [
                  {
                    "memory_limit_in_gbs": 0.30000001192092896,
                    "vcpus_limit": 0.10000000149011612
                  }
                ],
                "security_context": [
                  {
                    "capabilities": [],
                    "is_non_root_user_check_enabled": false,
                    "is_root_file_system_readonly": false,
                    "run_as_group": 0,
                    "run_as_user": 0,
                    "security_context_type": "LINUX"
                  }
                ],
                "state": "ACTIVE",
                "system_tags": {},
                "time_created": "2025-10-28 11:12:08.492 +0000 UTC",
                "time_terminated": "",
                "time_updated": "2025-10-28 11:12:53.689 +0000 UTC",
                "volume_mounts": [],
                "working_directory": ""
              },
              {
                "arguments": [
                  "-c",
                  "set -e\necho \"Installing Management Agent...\"\n\n# Install required packages\nyum install -y java-11-openjdk wget curl unzip\n\n# Download and install Management Agent\ncurl -o agent.rpm \"https://objectstorage.eu-frankfurt-1.oraclecloud.com/n/idtskf8cjzhp/b/installer/o/ManagementAgent/latest/oracle.mgmt_agent.rpm\"\nrpm -ivh agent.rpm\n\n# Configure agent with install key\necho \"INSTALL_KEY=Mi4wLGV1LWZyYW5rZnVydC0xLG9jaWQxLnRlbmFuY3kub2MxLi5hYWFhYWFhYXh6cHhiY2FnN3pnYW1oMmVybGdncXJvM3k2M3R2bTJyYmtrano0ejJ6c2t2YWd1cGl6N2Esb2NpZDEubWFuYWdlbWVudGFnZW50aW5zdGFsbGtleS5vYzEuZXUtZnJhbmtmdXJ0LTEuYW1hYWFhYWF0dGt2a2tpYWhiZXhmZjd4aHBnbm9oYWtvamllZWNhaWlzbnJ4dmxpYXI3bWZzcWtpNndhLElBOVZYVnF1RFlRc1pMODFETVloaWsxZ2x0MllJYjlta1NRU0w2alo=\" \u003e /opt/oracle/mgmt_agent/agent_inst/config/mgmt_agent_install.properties\n\n# Configure Prometheus scraping\ncat \u003e /opt/oracle/mgmt_agent/agent_inst/config/prometheus.yml \u003c\u003cEOF\nglobal:\n  scrape_interval: 60s\n  scrape_timeout: 10s\n\nscrape_configs:\n  - job_name: 'container-app'\n    static_configs:\n      - targets: ['localhost:9090']\n    metrics_path: '/metrics'\nEOF\n\n# Start Management Agent\n/opt/oracle/mgmt_agent/agent_inst/bin/setup.sh -responseFile /opt/oracle/mgmt_agent/agent_inst/config/mgmt_agent_install.properties\n\n# Keep container running\ntail -f /opt/oracle/mgmt_agent/agent_inst/log/mgmt_agent.log\n"
                ],
                "availability_domain": "NoEK:EU-FRANKFURT-1-AD-1",
                "command": [
                  "/bin/bash"
                ],
                "compartment_id": "ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
                "container_id": "ocid1.computecontainer.oc1.eu-frankfurt-1.antheljrttkvkkiatxfhrygjdauuczv6nmthernledaradyrrjcduw2qoqwa",
                "container_instance_id": "ocid1.computecontainerinstance.oc1.eu-frankfurt-1.antheljrttkvkkiaea6b3w2gvm2f2d4roaaevwk3dpj5fd7tj4sckak6zk7a",
                "defined_tags": {
                  "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle-Standard.CostCenter": "Specialists",
                  "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle_Tags.CreatedOn": "2025-10-28T11:12:08.133Z"
                },
                "display_name": "monitoring-demo-agent",
                "environment_variables": {
                  "JAVA_HOME": "/usr/lib/jvm/java-11-openjdk",
                  "METRICS_NAMESPACE": "container_monitoring",
                  "MGMT_AGENT_KEY": "Mi4wLGV1LWZyYW5rZnVydC0xLG9jaWQxLnRlbmFuY3kub2MxLi5hYWFhYWFhYXh6cHhiY2FnN3pnYW1oMmVybGdncXJvM3k2M3R2bTJyYmtrano0ejJ6c2t2YWd1cGl6N2Esb2NpZDEubWFuYWdlbWVudGFnZW50aW5zdGFsbGtleS5vYzEuZXUtZnJhbmtmdXJ0LTEuYW1hYWFhYWF0dGt2a2tpYWhiZXhmZjd4aHBnbm9oYWtvamllZWNhaWlzbnJ4dmxpYXI3bWZzcWtpNndhLElBOVZYVnF1RFlRc1pMODFETVloaWsxZ2x0MllJYjlta1NRU0w2alo=",
                  "OCI_REGION": "eu-frankfurt-1",
                  "PROMETHEUS_PORT": "9090"
                },
                "exit_code": 0,
                "fault_domain": "",
                "freeform_tags": {
                  "CreatedDate": "2025-10-28",
                  "Environment": "Development",
                  "ManagedBy": "Terraform",
                  "Project": "OCI-Container-Monitoring",
                  "Terraform": "true"
                },
                "health_checks": [],
                "image_url": "container-registry.oracle.com/os/oraclelinux:8",
                "is_resource_principal_disabled": false,
                "lifecycle_details": "CONTAINER_RUNNING",
                "resource_config": [
                  {
                    "memory_limit_in_gbs": 1.2000000476837158,
                    "vcpus_limit": 0.30000001192092896
                  }
                ],
                "security_context": [
                  {
                    "capabilities": [],
                    "is_non_root_user_check_enabled": false,
                    "is_root_file_system_readonly": false,
                    "run_as_group": 0,
                    "run_as_user": 0,
                    "security_context_type": "LINUX"
                  }
                ],
                "state": "ACTIVE",
                "system_tags": {},
                "time_created": "2025-10-28 11:12:08.492 +0000 UTC",
                "time_terminated": "",
                "time_updated": "2025-10-28 11:12:53.681 +0000 UTC",
                "volume_mounts": [],
                "working_directory": ""
              }
            ],
            "defined_tags": {
              "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle-Standard.CostCenter": "Specialists",
              "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle_Tags.CreatedOn": "2025-10-28T11:12:08.133Z"
            },
            "display_name": "monitoring-demo",
            "dns_config": [
              {
                "nameservers": [
                  "169.254.169.254"
                ],
                "options": [],
                "searches": []
              }
            ],
            "fault_domain": null,
            "freeform_tags": {
              "CreatedDate": "2025-10-28",
              "Environment": "Development",
              "ManagedBy": "Terraform",
              "Project": "OCI-Container-Monitoring",
              "Terraform": "true"
            },
            "graceful_shutdown_timeout_in_seconds": "30",
            "id": "ocid1.computecontainerinstance.oc1.eu-frankfurt-1.antheljrttkvkkiaea6b3w2gvm2f2d4roaaevwk3dpj5fd7tj4sckak6zk7a",
            "image_pull_secrets": [],
            "lifecycle_details": "Active",
            "shape": "CI.Standard.E4.Flex",
            "shape_config": [
              {
                "memory_in_gbs": 4,
                "networking_bandwidth_in_gbps": 1000,
                "ocpus": 1,
                "processor_description": "2.25 GHz AMD EPYC™ 7J13 (Milan)"
              }
            ],
            "state": "ACTIVE",
            "system_tags": {},
            "time_created": "2025-10-28 11:12:08.505 +0000 UTC",
            "time_updated": "2025-10-28 11:12:53.622 +0000 UTC",
            "vnics": [
              {
                "defined_tags": {
                  "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle-Standard.CostCenter": "Specialists",
                  "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle_Tags.CreatedOn": "2025-10-28T11:12:11.169Z"
                },
                "display_name": "vnic-zk7a",
                "freeform_tags": {},
                "hostname_label": "vnic-zk7a",
                "is_public_ip_assigned": true,
                "nsg_ids": [],
                "private_ip": "10.0.0.92",
                "skip_source_dest_check": true,
                "subnet_id": "ocid1.subnet.oc1.eu-frankfurt-1.aaaaaaaaxw6iwug5ig2bciksa4fgoohy5jk3bnygq4hbf4zgeiymgj6nzhna",
                "vnic_id": "ocid1.vnic.oc1.eu-frankfurt-1.abtheljr253y5zzhgtjaho2ra24ajprrwkfiuavwyw4h2e2xhr6dcpazygkq"
              }
            ],
            "volume_count": 0,
            "volumes": []
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.container_instance",
      "mode": "data",
      "type": "oci_core_vnic",
      "name": "container_vnic",
      "provider": "provider[\"registry.terraform.io/hashicorp/oci\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "availability_domain": "NoEK:EU-FRANKFURT-1-AD-1",
            "compartment_id": "ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
            "defined_tags": {
              "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle-Standard.CostCenter": "Specialists",
              "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle_Tags.CreatedOn": "2025-10-28T11:12:11.169Z"
            },
            "display_name": "vnic-zk7a",
            "freeform_tags": {},
            "hostname_label": "vnic-zk7a",
            "id": "ocid1.vnic.oc1.eu-frankfurt-1.abtheljr253y5zzhgtjaho2ra24ajprrwkfiuavwyw4h2e2xhr6dcpazygkq",
            "ipv6addresses": [],
            "is_primary": true,
            "mac_address": "02:00:17:11:FC:8D",
            "nsg_ids": [],
            "private_ip_address": "10.0.0.92",
            "public_ip_address": "141.147.51.33",
            "route_table_id": null,
            "security_attributes": {},
            "skip_source_dest_check": true,
            "state": "AVAILABLE",
            "subnet_id": "ocid1.subnet.oc1.eu-frankfurt-1.aaaaaaaaxw6iwug5ig2bciksa4fgoohy5jk3bnygq4hbf4zgeiymgj6nzhna",
            "time_created": "2025-10-28 11:12:11.228 +0000 UTC",
            "vlan_id": null,
            "vnic_id": "ocid1.vnic.oc1.eu-frankfurt-1.abtheljr253y5zzhgtjaho2ra24ajprrwkfiuavwyw4h2e2xhr6dcpazygkq"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.container_instance",
      "mode": "data",
      "type": "oci_identity_availability_domains",
      "name": "ads",
      "provider": "provider[\"registry.terraform.io/hashicorp/oci\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "availability_domains": [
              {
                "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaxzpxbcag7zgamh2erlggqro3y63tvm2rbkkjz4z2zskvagupiz7a",
                "id": "ocid1.availabilitydomain.oc1..aaaaaaaaiifj24st3w4j7cowuo3pmqcuqwjapjv435vtjmgh5j7q3flguwna",
                "name": "NoEK:EU-FRANKFURT-1-AD-1"
              },
              {
                "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaxzpxbcag7zgamh2erlggqro3y63tvm2rbkkjz4z2zskvagupiz7a",
                "id": "ocid1.availabilitydomain.oc1..aaaaaaaalcdcbl7u6akbmkojxhrozpj2v7yavqqydkj3ytyjbt47lnoqnm2q",
                "name": "NoEK:EU-FRANKFURT-1-AD-2"
              },
              {
                "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaxzpxbcag7zgamh2erlggqro3y63tvm2rbkkjz4z2zskvagupiz7a",
                "id": "ocid1.availabilitydomain.oc1..aaaaaaaaa2artt5wizbqvwl3rgptylx2l7jqbnyv4dygcfvlrd3dphvi3mdq",
                "name": "NoEK:EU-FRANKFURT-1-AD-3"
              }
            ],
            "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaxzpxbcag7zgamh2erlggqro3y63tvm2rbkkjz4z2zskvagupiz7a",
            "filter": null,
            "id": "IdentityAvailabilityDomainsDataSource-2176573680"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.container_instance",
      "mode": "managed",
      "type": "oci_container_instances_container_instance",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/oci\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "availability_domain": "NoEK:EU-FRANKFURT-1-AD-1",
            "compartment_id": "ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
            "container_count": 4,
            "container_restart_policy": "ALWAYS",
            "containers": [
              {
                "arguments": [],
                "availability_domain": "NoEK:EU-FRANKFURT-1-AD-1",
                "command": [],
                "compartment_id": "ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
                "container_id": "ocid1.computecontainer.oc1.eu-frankfurt-1.antheljrttkvkkiathbi4mvx7vkzs6yvwnsyiw2yfsgh6om6kdycvxbf6naa",
                "container_instance_id": "ocid1.computecontainerinstance.oc1.eu-frankfurt-1.antheljrttkvkkiaea6b3w2gvm2f2d4roaaevwk3dpj5fd7tj4sckak6zk7a",
                "defined_tags": {
                  "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle-Standard.CostCenter": "Specialists",
                  "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle_Tags.CreatedOn": "2025-10-28T11:12:08.133Z"
                },
                "display_name": "monitoring-demo-app",
                "environment_variables": {},
                "exit_code": 0,
                "fault_domain": "",
                "freeform_tags": {
                  "CreatedDate": "2025-10-28",
                  "Environment": "Development",
                  "ManagedBy": "Terraform",
                  "Project": "OCI-Container-Monitoring",
                  "Terraform": "true"
                },
                "health_checks": [
                  {
                    "failure_action": "KILL",
                    "failure_threshold": 3,
                    "headers": [],
                    "health_check_type": "HTTP",
                    "initial_delay_in_seconds": 0,
                    "interval_in_seconds": 30,
                    "name": "healthCheck0",
                    "path": "/",
                    "port": 80,
                    "status": "HEALTHY",
                    "status_details": "",
                    "success_threshold": 1,
                    "timeout_in_seconds": 10
                  }
                ],
                "image_url": "nginx:latest",
                "is_resource_principal_disabled": false,
                "lifecycle_details": "CONTAINER_RUNNING",
                "resource_config": [
                  {
                    "memory_limit_in_gbs": 3.200000047683716,
                    "vcpus_limit": 0.800000011920929
                  }
                ],
                "security_context": [
                  {
                    "capabilities": [],
                    "is_non_root_user_check_enabled": false,
                    "is_root_file_system_readonly": false,
                    "run_as_group": 0,
                    "run_as_user": 0,
                    "security_context_type": "LINUX"
                  }
                ],
                "state": "ACTIVE",
                "system_tags": {},
                "time_created": "2025-10-28 11:12:08.437 +0000 UTC",
                "time_terminated": "",
                "time_updated": "2025-10-28 11:12:53.703 +0000 UTC",
                "volume_mounts": [],
                "working_directory": ""
              },
              {
                "arguments": [
                  "--port=8080",
                  "--housekeeping_interval=10s",
                  "--docker_only=true",
                  "--store_container_labels=false"
                ],
                "availability_domain": "NoEK:EU-FRANKFURT-1-AD-1",
                "command": [],
                "compartment_id": "ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
                "container_id": "ocid1.computecontainer.oc1.eu-frankfurt-1.antheljrttkvkkiaqsnzqfdwirkos5sodgv3okwdaiwo4ko6bgiiuxkqvidq",
                "container_instance_id": "ocid1.computecontainerinstance.oc1.eu-frankfurt-1.antheljrttkvkkiaea6b3w2gvm2f2d4roaaevwk3dpj5fd7tj4sckak6zk7a",
                "defined_tags": {
                  "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle-Standard.CostCenter": "Specialists",
                  "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle_Tags.CreatedOn": "2025-10-28T11:12:08.133Z"
                },
                "display_name": "monitoring-demo-cadvisor",
                "environment_variables": {},
                "exit_code": 0,
                "fault_domain": "",
                "freeform_tags": {
                  "CreatedDate": "2025-10-28",
                  "Environment": "Development",
                  "ManagedBy": "Terraform",
                  "Project": "OCI-Container-Monitoring",
                  "Terraform": "true"
                },
                "health_checks": [
                  {
                    "failure_action": "KILL",
                    "failure_threshold": 3,
                    "headers": [],
                    "health_check_type": "HTTP",
                    "initial_delay_in_seconds": 0,
                    "interval_in_seconds": 30,
                    "name": "healthCheck0",
                    "path": "/metrics",
                    "port": 8080,
                    "status": "HEALTHY",
                    "status_details": "",
                    "success_threshold": 1,
                    "timeout_in_seconds": 10
                  }
                ],
                "image_url": "gcr.io/cadvisor/cadvisor:latest",
                "is_resource_principal_disabled": false,
                "lifecycle_details": "CONTAINER_RUNNING",
                "resource_config": [
                  {
                    "memory_limit_in_gbs": 0.5,
                    "vcpus_limit": 0.10000000149011612
                  }
                ],
                "security_context": [
                  {
                    "capabilities": [],
                    "is_non_root_user_check_enabled": false,
                    "is_root_file_system_readonly": false,
                    "run_as_group": 0,
                    "run_as_user": 0,
                    "security_context_type": "LINUX"
                  }
                ],
                "state": "ACTIVE",
                "system_tags": {},
                "time_created": "2025-10-28 11:12:08.441 +0000 UTC",
                "time_terminated": "",
                "time_updated": "2025-10-28 11:12:53.696 +0000 UTC",
                "volume_mounts": [],
                "working_directory": ""
              },
              {
                "arguments": [
                  "--path.rootfs=/host",
                  "--path.procfs=/host/proc",
                  "--path.sysfs=/host/sys",
                  "--collector.filesystem.mount-points-exclude=^/(sys|proc|dev|host|etc)($$|/)"
                ],
                "availability_domain": "NoEK:EU-FRANKFURT-1-AD-1",
                "command": [],
                "compartment_id": "ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
                "container_id": "ocid1.computecontainer.oc1.eu-frankfurt-1.antheljrttkvkkialkpvqgtdwmwtebv4biffsqqjpy5rvlqcs5yyihknlm7q",
                "container_instance_id": "ocid1.computecontainerinstance.oc1.eu-frankfurt-1.antheljrttkvkkiaea6b3w2gvm2f2d4roaaevwk3dpj5fd7tj4sckak6zk7a",
                "defined_tags": {
                  "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle-Standard.CostCenter": "Specialists",
                  "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle_Tags.CreatedOn": "2025-10-28T11:12:08.133Z"
                },
                "display_name": "monitoring-demo-node-exporter",
                "environment_variables": {},
                "exit_code": 2,
                "fault_domain": "",
                "freeform_tags": {
                  "CreatedDate": "2025-10-28",
                  "Environment": "Development",
                  "ManagedBy": "Terraform",
                  "Project": "OCI-Container-Monitoring",
                  "Terraform": "true"
                },
                "health_checks": [
                  {
                    "failure_action": "KILL",
                    "failure_threshold": 3,
                    "headers": [],
                    "health_check_type": "HTTP",
                    "initial_delay_in_seconds": 0,
                    "interval_in_seconds": 30,
                    "name": "healthCheck0",
                    "path": "/metrics",
                    "port": 9100,
                    "status": "UNKNOWN",
                    "status_details": "Health check is just created",
                    "success_threshold": 1,
                    "timeout_in_seconds": 10
                  }
                ],
                "image_url": "prom/node-exporter:latest",
                "is_resource_principal_disabled": false,
                "lifecycle_details": "CONTAINER_TERMINATED",
                "resource_config": [
                  {
                    "memory_limit_in_gbs": 0.30000001192092896,
                    "vcpus_limit": 0.10000000149011612
                  }
                ],
                "security_context": [
                  {
                    "capabilities": [],
                    "is_non_root_user_check_enabled": false,
                    "is_root_file_system_readonly": false,
                    "run_as_group": 0,
                    "run_as_user": 0,
                    "security_context_type": "LINUX"
                  }
                ],
                "state": "ACTIVE",
                "system_tags": {},
                "time_created": "2025-10-28 11:12:08.492 +0000 UTC",
                "time_terminated": "",
                "time_updated": "2025-10-28 11:12:53.689 +0000 UTC",
                "volume_mounts": [],
                "working_directory": ""
              },
              {
                "arguments": [
                  "-c",
                  "set -e\necho \"Installing Management Agent...\"\n\n# Install required packages\nyum install -y java-11-openjdk wget curl unzip\n\n# Download and install Management Agent\ncurl -o agent.rpm \"https://objectstorage.eu-frankfurt-1.oraclecloud.com/n/idtskf8cjzhp/b/installer/o/ManagementAgent/latest/oracle.mgmt_agent.rpm\"\nrpm -ivh agent.rpm\n\n# Configure agent with install key\necho \"INSTALL_KEY=Mi4wLGV1LWZyYW5rZnVydC0xLG9jaWQxLnRlbmFuY3kub2MxLi5hYWFhYWFhYXh6cHhiY2FnN3pnYW1oMmVybGdncXJvM3k2M3R2bTJyYmtrano0ejJ6c2t2YWd1cGl6N2Esb2NpZDEubWFuYWdlbWVudGFnZW50aW5zdGFsbGtleS5vYzEuZXUtZnJhbmtmdXJ0LTEuYW1hYWFhYWF0dGt2a2tpYWhiZXhmZjd4aHBnbm9oYWtvamllZWNhaWlzbnJ4dmxpYXI3bWZzcWtpNndhLElBOVZYVnF1RFlRc1pMODFETVloaWsxZ2x0MllJYjlta1NRU0w2alo=\" \u003e /opt/oracle/mgmt_agent/agent_inst/config/mgmt_agent_install.properties\n\n# Configure Prometheus scraping\ncat \u003e /opt/oracle/mgmt_agent/agent_inst/config/prometheus.yml \u003c\u003cEOF\nglobal:\n  scrape_interval: 60s\n  scrape_timeout: 10s\n\nscrape_configs:\n  - job_name: 'container-app'\n    static_configs:\n      - targets: ['localhost:9090']\n    metrics_path: '/metrics'\nEOF\n\n# Start Management Agent\n/opt/oracle/mgmt_agent/agent_inst/bin/setup.sh -responseFile /opt/oracle/mgmt_agent/agent_inst/config/mgmt_agent_install.properties\n\n# Keep container running\ntail -f /opt/oracle/mgmt_agent/agent_inst/log/mgmt_agent.log\n"
                ],
                "availability_domain": "NoEK:EU-FRANKFURT-1-AD-1",
                "command": [
                  "/bin/bash"
                ],
                "compartment_id": "ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
                "container_id": "ocid1.computecontainer.oc1.eu-frankfurt-1.antheljrttkvkkiatxfhrygjdauuczv6nmthernledaradyrrjcduw2qoqwa",
                "container_instance_id": "ocid1.computecontainerinstance.oc1.eu-frankfurt-1.antheljrttkvkkiaea6b3w2gvm2f2d4roaaevwk3dpj5fd7tj4sckak6zk7a",
                "defined_tags": {
                  "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle-Standard.CostCenter": "Specialists",
                  "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle_Tags.CreatedOn": "2025-10-28T11:12:08.133Z"
                },
                "display_name": "monitoring-demo-agent",
                "environment_variables": {
                  "JAVA_HOME": "/usr/lib/jvm/java-11-openjdk",
                  "METRICS_NAMESPACE": "container_monitoring",
                  "MGMT_AGENT_KEY": "Mi4wLGV1LWZyYW5rZnVydC0xLG9jaWQxLnRlbmFuY3kub2MxLi5hYWFhYWFhYXh6cHhiY2FnN3pnYW1oMmVybGdncXJvM3k2M3R2bTJyYmtrano0ejJ6c2t2YWd1cGl6N2Esb2NpZDEubWFuYWdlbWVudGFnZW50aW5zdGFsbGtleS5vYzEuZXUtZnJhbmtmdXJ0LTEuYW1hYWFhYWF0dGt2a2tpYWhiZXhmZjd4aHBnbm9oYWtvamllZWNhaWlzbnJ4dmxpYXI3bWZzcWtpNndhLElBOVZYVnF1RFlRc1pMODFETVloaWsxZ2x0MllJYjlta1NRU0w2alo=",
                  "OCI_REGION": "eu-frankfurt-1",
                  "PROMETHEUS_PORT": "9090"
                },
                "exit_code": 0,
                "fault_domain": "",
                "freeform_tags": {
                  "CreatedDate": "2025-10-28",
                  "Environment": "Development",
                  "ManagedBy": "Terraform",
                  "Project": "OCI-Container-Monitoring",
                  "Terraform": "true"
                },
                "health_checks": [],
                "image_url": "container-registry.oracle.com/os/oraclelinux:8",
                "is_resource_principal_disabled": false,
                "lifecycle_details": "CONTAINER_RUNNING",
                "resource_config": [
                  {
                    "memory_limit_in_gbs": 1.2000000476837158,
                    "vcpus_limit": 0.30000001192092896
                  }
                ],
                "security_context": [
                  {
                    "capabilities": [],
                    "is_non_root_user_check_enabled": false,
                    "is_root_file_system_readonly": false,
                    "run_as_group": 0,
                    "run_as_user": 0,
                    "security_context_type": "LINUX"
                  }
                ],
                "state": "ACTIVE",
                "system_tags": {},
                "time_created": "2025-10-28 11:12:08.492 +0000 UTC",
                "time_terminated": "",
                "time_updated": "2025-10-28 11:12:53.681 +0000 UTC",
                "volume_mounts": [],
                "working_directory": ""
              }
            ],
            "defined_tags": {
              "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle-Standard.CostCenter": "Specialists",
              "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle_Tags.CreatedOn": "2025-10-28T11:12:08.133Z"
            },
            "display_name": "monitoring-demo",
            "dns_config": [
              {
                "nameservers": [
                  "169.254.169.254"
                ],
                "options": [],
                "searches": []
              }
            ],
            "fault_domain": null,
            "freeform_tags": {
              "CreatedDate": "2025-10-28",
              "Environment": "Development",
              "ManagedBy": "Terraform",
              "Project": "OCI-Container-Monitoring",
              "Terraform": "true"
            },
            "graceful_shutdown_timeout_in_seconds": "30",
            "id": "ocid1.computecontainerinstance.oc1.eu-frankfurt-1.antheljrttkvkkiaea6b3w2gvm2f2d4roaaevwk3dpj5fd7tj4sckak6zk7a",
            "image_pull_secrets": [],
            "lifecycle_details": "Active",
            "shape": "CI.Standard.E4.Flex",
            "shape_config": [
              {
                "memory_in_gbs": 4,
                "networking_bandwidth_in_gbps": 1000,
                "ocpus": 1,
                "processor_description": "2.25 GHz AMD EPYC™ 7J13 (Milan)"
              }
            ],
            "state": "ACTIVE",
            "system_tags": {},
            "time_created": "2025-10-28 11:12:08.505 +0000 UTC",
            "time_updated": "2025-10-28 11:12:53.622 +0000 UTC",
            "timeouts": null,
            "vnics": [
              {
                "defined_tags": {
                  "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle-Standard.CostCenter": "Specialists",
                  "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
                  "Oracle_Tags.CreatedOn": "2025-10-28T11:12:11.169Z"
                },
                "display_name": "vnic-zk7a",
                "freeform_tags": {},
                "hostname_label": "vnic-zk7a",
                "is_public_ip_assigned": true,
                "nsg_ids": [],
                "private_ip": "10.0.0.92",
                "skip_source_dest_check": true,
                "subnet_id": "ocid1.subnet.oc1.eu-frankfurt-1.aaaaaaaaxw6iwug5ig2bciksa4fgoohy5jk3bnygq4hbf4zgeiymgj6nzhna",
                "vnic_id": "ocid1.vnic.oc1.eu-frankfurt-1.abtheljr253y5zzhgtjaho2ra24ajprrwkfiuavwyw4h2e2xhr6dcpazygkq"
              }
            ],
            "volume_count": 0,
            "volumes": []
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "containers"
              },
              {
                "type": "index",
                "value": {
                  "value": 3,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "environment_variables"
              },
              {
                "type": "index",
                "value": {
                  "value": "MGMT_AGENT_KEY",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "containers"
              },
              {
                "type": "index",
                "value": {
                  "value": 3,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "arguments"
              },
              {
                "type": "index",
                "value": {
                  "value": 1,
                  "type": "number"
                }
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.container_instance.data.oci_identity_availability_domains.ads",
            "module.iam.oci_identity_dynamic_group.container_instance_dg",
            "module.iam.oci_identity_dynamic_group.management_agent_dg",
            "module.iam.oci_identity_policy.container_logging_policy",
            "module.iam.oci_identity_policy.container_resource_policy",
            "module.iam.oci_identity_policy.logging_service_policy",
            "module.iam.oci_identity_policy.mgmt_agent_metrics_policy",
            "module.iam.oci_identity_policy.monitoring_policy",
            "module.management_agent.local_file.agent_config_json",
            "module.management_agent.local_file.agent_install_script",
            "module.management_agent.local_file.prometheus_config",
            "module.management_agent.local_file.service_discovery_config",
            "module.management_agent.oci_management_agent_management_agent_install_key.main",
            "module.management_agent.oci_objectstorage_object.agent_install_script",
            "module.management_agent.oci_objectstorage_object.prometheus_config",
            "module.management_agent.oci_objectstorage_object.service_discovery_config"
          ]
        }
      ]
    },
    {
      "module": "module.container_instance",
      "mode": "managed",
      "type": "time_sleep",
      "name": "wait_for_container",
      "provider": "provider[\"registry.terraform.io/hashicorp/time\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "create_duration": "30s",
            "destroy_duration": null,
            "id": "2025-10-28T05:58:31Z",
            "triggers": null
          },
          "sensitive_attributes": [],
          "dependencies": [
            "module.container_instance.data.oci_identity_availability_domains.ads",
            "module.container_instance.oci_container_instances_container_instance.main",
            "module.iam.oci_identity_dynamic_group.container_instance_dg",
            "module.iam.oci_identity_dynamic_group.management_agent_dg",
            "module.iam.oci_identity_policy.container_logging_policy",
            "module.iam.oci_identity_policy.container_resource_policy",
            "module.iam.oci_identity_policy.logging_service_policy",
            "module.iam.oci_identity_policy.mgmt_agent_metrics_policy",
            "module.iam.oci_identity_policy.monitoring_policy",
            "module.management_agent.local_file.agent_config_json",
            "module.management_agent.local_file.agent_install_script",
            "module.management_agent.local_file.prometheus_config",
            "module.management_agent.local_file.service_discovery_config",
            "module.management_agent.oci_management_agent_management_agent_install_key.main",
            "module.management_agent.oci_objectstorage_object.agent_install_script",
            "module.management_agent.oci_objectstorage_object.prometheus_config",
            "module.management_agent.oci_objectstorage_object.service_discovery_config"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "oci_identity_dynamic_group",
      "name": "container_instance_dg",
      "provider": "provider[\"registry.terraform.io/hashicorp/oci\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaxzpxbcag7zgamh2erlggqro3y63tvm2rbkkjz4z2zskvagupiz7a",
            "defined_tags": {
              "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle_Tags.CreatedOn": "2025-10-27T19:59:37.261Z"
            },
            "description": "Dynamic group for container instances to access OCI services",
            "freeform_tags": {
              "CreatedDate": "2025-10-28",
              "Environment": "Development",
              "ManagedBy": "Terraform",
              "Project": "OCI-Container-Monitoring",
              "Terraform": "true"
            },
            "id": "ocid1.dynamicgroup.oc1..aaaaaaaaqswmk6bi5hkxto3fh6zvykyqtfvprl7np7f4cyexldmx5xq7kmzq",
            "inactive_state": null,
            "matching_rule": "ALL {resource.type='computecontainerinstance', resource.compartment.id='ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq'}",
            "name": "monitoring-demo-container-instance-dg",
            "state": "ACTIVE",
            "time_created": "2025-10-27 19:59:37.482 +0000 UTC",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "oci_identity_dynamic_group",
      "name": "management_agent_dg",
      "provider": "provider[\"registry.terraform.io/hashicorp/oci\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaxzpxbcag7zgamh2erlggqro3y63tvm2rbkkjz4z2zskvagupiz7a",
            "defined_tags": {
              "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle_Tags.CreatedOn": "2025-10-27T19:59:37.213Z"
            },
            "description": "Dynamic group for management agents to send metrics",
            "freeform_tags": {
              "CreatedDate": "2025-10-28",
              "Environment": "Development",
              "ManagedBy": "Terraform",
              "Project": "OCI-Container-Monitoring",
              "Terraform": "true"
            },
            "id": "ocid1.dynamicgroup.oc1..aaaaaaaa3fyjslicgc5rl2vjwaf5ynsm3rikymfhnii433axeelevzhr6rzq",
            "inactive_state": null,
            "matching_rule": "ALL {resource.type='managementagent', resource.compartment.id='ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq'}",
            "name": "monitoring-demo-mgmt-agent-dg",
            "state": "ACTIVE",
            "time_created": "2025-10-27 19:59:37.339 +0000 UTC",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "oci_identity_policy",
      "name": "container_logging_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/oci\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "ETag": "fc74e2a2cdd050060bd4b7a1bf60139c0db806e5",
            "compartment_id": "ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
            "defined_tags": {
              "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle-Standard.CostCenter": "Specialists",
              "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle_Tags.CreatedOn": "2025-10-27T19:59:37.986Z"
            },
            "description": "Policy to allow container instances to write logs",
            "freeform_tags": {
              "CreatedDate": "2025-10-28",
              "Environment": "Development",
              "ManagedBy": "Terraform",
              "Project": "OCI-Container-Monitoring",
              "Terraform": "true"
            },
            "id": "ocid1.policy.oc1..aaaaaaaao6ew2kg4t2el4uvqqublyei7zmjde2lf4t6fsypv6gwldfu63d7a",
            "inactive_state": null,
            "lastUpdateETag": "fc74e2a2cdd050060bd4b7a1bf60139c0db806e5",
            "name": "monitoring-demo-container-logging-policy",
            "policyHash": "f3dff7f57351fdda36fcaa0155b2038c",
            "state": "ACTIVE",
            "statements": [
              "Allow dynamic-group monitoring-demo-container-instance-dg to use log-content in compartment id ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
              "Allow dynamic-group monitoring-demo-container-instance-dg to use log-groups in compartment id ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq"
            ],
            "time_created": "2025-10-27 19:59:39.249 +0000 UTC",
            "timeouts": null,
            "version_date": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.iam.oci_identity_dynamic_group.container_instance_dg"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "oci_identity_policy",
      "name": "container_resource_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/oci\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "ETag": "2222627b5ecfa458a35fefc64f1e7791708ce8d1",
            "compartment_id": "ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
            "defined_tags": {
              "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle-Standard.CostCenter": "Specialists",
              "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle_Tags.CreatedOn": "2025-10-27T19:59:37.988Z"
            },
            "description": "Policy to allow container instances to access required resources",
            "freeform_tags": {
              "CreatedDate": "2025-10-28",
              "Environment": "Development",
              "ManagedBy": "Terraform",
              "Project": "OCI-Container-Monitoring",
              "Terraform": "true"
            },
            "id": "ocid1.policy.oc1..aaaaaaaa6pr6xlo4qczz6ijixdju77bgbrmpgsjd5yzxlaoovpf2zrcrc34a",
            "inactive_state": null,
            "lastUpdateETag": "2222627b5ecfa458a35fefc64f1e7791708ce8d1",
            "name": "monitoring-demo-container-resource-policy",
            "policyHash": "445a0eccffb1fd8642d7b6a9abfe9236",
            "state": "ACTIVE",
            "statements": [
              "Allow dynamic-group monitoring-demo-container-instance-dg to read metrics in compartment id ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
              "Allow dynamic-group monitoring-demo-container-instance-dg to read all-resources in compartment id ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq"
            ],
            "time_created": "2025-10-27 19:59:41.474 +0000 UTC",
            "timeouts": null,
            "version_date": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.iam.oci_identity_dynamic_group.container_instance_dg"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "oci_identity_policy",
      "name": "mgmt_agent_metrics_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/oci\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "ETag": "f8718a738b240cda19061c5eb2c325780930d19a",
            "compartment_id": "ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
            "defined_tags": {
              "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle-Standard.CostCenter": "Specialists",
              "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle_Tags.CreatedOn": "2025-10-27T19:59:37.893Z"
            },
            "description": "Policy to allow management agents to send metrics and telemetry",
            "freeform_tags": {
              "CreatedDate": "2025-10-28",
              "Environment": "Development",
              "ManagedBy": "Terraform",
              "Project": "OCI-Container-Monitoring",
              "Terraform": "true"
            },
            "id": "ocid1.policy.oc1..aaaaaaaa5sxfev5wkqyuefed6arvebzlmov62mx5nshijezdyerf7mysu2ca",
            "inactive_state": null,
            "lastUpdateETag": "f8718a738b240cda19061c5eb2c325780930d19a",
            "name": "monitoring-demo-mgmt-agent-metrics-policy",
            "policyHash": "cb50e7999bd545f1ed1a185cc48f9c78",
            "state": "ACTIVE",
            "statements": [
              "Allow dynamic-group monitoring-demo-mgmt-agent-dg to use metrics in compartment id ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
              "Allow dynamic-group monitoring-demo-mgmt-agent-dg to use management-agents in compartment id ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
              "Allow dynamic-group monitoring-demo-mgmt-agent-dg to read metrics in compartment id ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq"
            ],
            "time_created": "2025-10-27 19:59:37.911 +0000 UTC",
            "timeouts": null,
            "version_date": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.iam.oci_identity_dynamic_group.management_agent_dg"
          ]
        }
      ]
    },
    {
      "module": "module.management_agent[0]",
      "mode": "managed",
      "type": "local_file",
      "name": "agent_config_json",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "{\"compartment_id\":\"ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq\",\"install_key\":\"Mi4wLGV1LWZyYW5rZnVydC0xLG9jaWQxLnRlbmFuY3kub2MxLi5hYWFhYWFhYXh6cHhiY2FnN3pnYW1oMmVybGdncXJvM3k2M3R2bTJyYmtrano0ejJ6c2t2YWd1cGl6N2Esb2NpZDEubWFuYWdlbWVudGFnZW50aW5zdGFsbGtleS5vYzEuZXUtZnJhbmtmdXJ0LTEuYW1hYWFhYWF0dGt2a2tpYWhiZXhmZjd4aHBnbm9oYWtvamllZWNhaWlzbnJ4dmxpYXI3bWZzcWtpNndhLElBOVZYVnF1RFlRc1pMODFETVloaWsxZ2x0MllJYjlta1NRU0w2alo=\",\"install_key_id\":\"ocid1.managementagentinstallkey.oc1.eu-frankfurt-1.amaaaaaattkvkkiahbexff7xhpgnohakojieecaiisnrxvliar7mfsqki6wa\",\"metrics_namespace\":\"container_monitoring\",\"prometheus_config\":{\"metrics_path\":\"/metrics\",\"scrape_interval\":\"60s\",\"scrape_timeout\":\"10s\",\"targets\":[]}}",
            "content_base64": null,
            "content_base64sha256": "GJRWok5GoR73a9TLvBMcUEMwizTbj06z5REhGrzpVuQ=",
            "content_base64sha512": "B1rO8Kxvy1ez1VGl9Ug9zpc5JWaZnzD8yVu0fqaHUyguerCJBsycwafdbAdVzInmxB1Z6ZWp6jcekziWon/17w==",
            "content_md5": "2edba6c19bd90f569c665c9384e6ff1b",
            "content_sha1": "6d13d2805193a8d1d5f5429bee2c736cb20651e3",
            "content_sha256": "189456a24e46a11ef76bd4cbbc131c5043308b34db8f4eb3e511211abce956e4",
            "content_sha512": "075acef0ac6fcb57b3d551a5f5483dce97392566999f30fcc95bb47ea68753282e7ab08906cc9cc1a7dd6c0755cc89e6c41d59e995a9ea371e933896a27ff5ef",
            "directory_permission": "0777",
            "file_permission": "0644",
            "filename": "./output/agent-config.json",
            "id": "6d13d2805193a8d1d5f5429bee2c736cb20651e3",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "sensitive_content"
              }
            ]
          ],
          "dependencies": [
            "module.iam.oci_identity_dynamic_group.container_instance_dg",
            "module.iam.oci_identity_dynamic_group.management_agent_dg",
            "module.iam.oci_identity_policy.container_logging_policy",
            "module.iam.oci_identity_policy.container_resource_policy",
            "module.iam.oci_identity_policy.logging_service_policy",
            "module.iam.oci_identity_policy.mgmt_agent_metrics_policy",
            "module.iam.oci_identity_policy.monitoring_policy",
            "module.management_agent.oci_management_agent_management_agent_install_key.main"
          ]
        }
      ]
    },
    {
      "module": "module.management_agent[0]",
      "mode": "managed",
      "type": "local_file",
      "name": "agent_install_script",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "#!/bin/bash\n#######################################\n# OCI Management Agent Installation Script\n# Auto-generated by Terraform\n#######################################\n\nset -e\n\n# Configuration\nINSTALL_KEY=\"Mi4wLGV1LWZyYW5rZnVydC0xLG9jaWQxLnRlbmFuY3kub2MxLi5hYWFhYWFhYXh6cHhiY2FnN3pnYW1oMmVybGdncXJvM3k2M3R2bTJyYmtrano0ejJ6c2t2YWd1cGl6N2Esb2NpZDEubWFuYWdlbWVudGFnZW50aW5zdGFsbGtleS5vYzEuZXUtZnJhbmtmdXJ0LTEuYW1hYWFhYWF0dGt2a2tpYWhiZXhmZjd4aHBnbm9oYWtvamllZWNhaWlzbnJ4dmxpYXI3bWZzcWtpNndhLElBOVZYVnF1RFlRc1pMODFETVloaWsxZ2x0MllJYjlta1NRU0w2alo=\"\nREGION=\"eu-frankfurt-1\"\nCOMPARTMENT_OCID=\"ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq\"\nAGENT_VERSION=\"latest\"\nINSTALL_DIR=\"/opt/oracle/mgmt_agent\"\n\n# Colors for output\nRED='\\033[0;31m'\nGREEN='\\033[0;32m'\nYELLOW='\\033[1;33m'\nNC='\\033[0m' # No Color\n\necho -e \"${GREEN}===========================================\\033[0m\"\necho -e \"${GREEN}OCI Management Agent Installation\\033[0m\"\necho -e \"${GREEN}===========================================\\033[0m\"\n\n# Check if running as root\nif [ \"$EUID\" -ne 0 ]; then\n    echo -e \"${RED}Error: This script must be run as root\\033[0m\"\n    exit 1\nfi\n\n# Detect OS\nif [ -f /etc/os-release ]; then\n    . /etc/os-release\n    OS=$ID\n    OS_VERSION=$VERSION_ID\nelse\n    echo -e \"${RED}Error: Cannot detect OS\\033[0m\"\n    exit 1\nfi\n\necho -e \"${GREEN}Detected OS: $OS $OS_VERSION\\033[0m\"\n\n# Create installation directory\nmkdir -p \"$INSTALL_DIR\"\ncd \"$INSTALL_DIR\"\n\n# Download agent installer based on OS\necho -e \"${YELLOW}Downloading Management Agent installer...\\033[0m\"\n\nif [ \"$OS\" = \"ol\" ] || [ \"$OS\" = \"centos\" ] || [ \"$OS\" = \"rhel\" ]; then\n    # Oracle Linux / RHEL / CentOS\n    INSTALLER_URL=\"https://objectstorage.$REGION.oraclecloud.com/n/idtskf8cjzhp/b/installer/o/Windows/latest/oracle.mgmt_agent.rpm\"\n    INSTALLER_FILE=\"oracle.mgmt_agent.rpm\"\n    INSTALL_CMD=\"rpm -ivh\"\nelif [ \"$OS\" = \"ubuntu\" ] || [ \"$OS\" = \"debian\" ]; then\n    # Ubuntu / Debian\n    INSTALLER_URL=\"https://objectstorage.$REGION.oraclecloud.com/n/idtskf8cjzhp/b/installer/o/Linux/latest/oracle.mgmt_agent.deb\"\n    INSTALLER_FILE=\"oracle.mgmt_agent.deb\"\n    INSTALL_CMD=\"dpkg -i\"\nelse\n    echo -e \"${RED}Error: Unsupported OS: $OS\\033[0m\"\n    exit 1\nfi\n\n# Download installer\nif command -v wget \u0026\u003e /dev/null; then\n    wget -q \"$INSTALLER_URL\" -O \"$INSTALLER_FILE\"\nelif command -v curl \u0026\u003e /dev/null; then\n    curl -s -o \"$INSTALLER_FILE\" \"$INSTALLER_URL\"\nelse\n    echo -e \"${RED}Error: Neither wget nor curl is available\\033[0m\"\n    exit 1\nfi\n\n# Install agent\necho -e \"${YELLOW}Installing Management Agent...\\033[0m\"\n$INSTALL_CMD \"$INSTALLER_FILE\"\n\n# Configure agent\necho -e \"${YELLOW}Configuring Management Agent...\\033[0m\"\n\n# Create input.rsp file\ncat \u003e /tmp/input.rsp \u003c\u003cEOF\nManagementAgentInstallKey=$INSTALL_KEY\nAgentDisplayName=$(hostname)-mgmt-agent\nCredentialWalletPassword=$(openssl rand -base64 32)\nService.plugin.prometheus.download=true\nEOF\n\n# Setup agent\n/opt/oracle/mgmt_agent/agent_inst/bin/setup.sh opts=/tmp/input.rsp\n\n# Start agent service\necho -e \"${YELLOW}Starting Management Agent service...\\033[0m\"\nsystemctl enable mgmt_agent\nsystemctl start mgmt_agent\n\n# Wait for agent to register\necho -e \"${YELLOW}Waiting for agent to register with OCI...\\033[0m\"\nsleep 30\n\n# Check agent status\nif systemctl is-active --quiet mgmt_agent; then\n    echo -e \"${GREEN}Management Agent installed and running successfully!\\033[0m\"\n    systemctl status mgmt_agent --no-pager\nelse\n    echo -e \"${RED}Error: Management Agent failed to start\\033[0m\"\n    systemctl status mgmt_agent --no-pager\n    exit 1\nfi\n\n# Cleanup\nrm -f /tmp/input.rsp\nrm -f \"$INSTALLER_FILE\"\n\necho -e \"${GREEN}===========================================\\033[0m\"\necho -e \"${GREEN}Installation completed successfully!\\033[0m\"\necho -e \"${GREEN}===========================================\\033[0m\"\n",
            "content_base64": null,
            "content_base64sha256": "+WF5uicRhynmJc2oMkXtwTbYF/asNmYKEDWUuA/XJis=",
            "content_base64sha512": "Rykrr4GF7okG0EOd1dHDKi2Gx5WA2JS20SUNUAsIgKtnaKKHzr2Wknf4Jk3qE7XRTvqBdhLJaqts+wY6wyNgNg==",
            "content_md5": "2f1d0ffd6dc6e6009c54818b050fa943",
            "content_sha1": "5b919dfc129789a6439babe26d044a7786e663b4",
            "content_sha256": "f96179ba27118729e625cda83245edc136d817f6ac36660a103594b80fd7262b",
            "content_sha512": "47292baf8185ee8906d0439dd5d1c32a2d86c79580d894b6d1250d500b0880ab6768a287cebd969277f8264dea13b5d14efa817612c96aab6cfb063ac3236036",
            "directory_permission": "0777",
            "file_permission": "0755",
            "filename": "./output/install-agent.sh",
            "id": "5b919dfc129789a6439babe26d044a7786e663b4",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "sensitive_content"
              }
            ]
          ],
          "dependencies": [
            "module.iam.oci_identity_dynamic_group.container_instance_dg",
            "module.iam.oci_identity_dynamic_group.management_agent_dg",
            "module.iam.oci_identity_policy.container_logging_policy",
            "module.iam.oci_identity_policy.container_resource_policy",
            "module.iam.oci_identity_policy.logging_service_policy",
            "module.iam.oci_identity_policy.mgmt_agent_metrics_policy",
            "module.iam.oci_identity_policy.monitoring_policy",
            "module.management_agent.oci_management_agent_management_agent_install_key.main"
          ]
        }
      ]
    },
    {
      "module": "module.management_agent[0]",
      "mode": "managed",
      "type": "local_file",
      "name": "prometheus_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "# Prometheus Configuration for OCI Management Agent\n# Auto-generated by Terraform\n\nglobal:\n  scrape_interval: 60s\n  scrape_timeout: 10s\n  evaluation_interval: 60s\n\n  external_labels:\n    environment: 'production'\n    region: 'oci'\n    metrics_namespace: 'container_monitoring'\n    container_name: 'monitoring-demo'\n    environment: 'Development'\n\nscrape_configs:\n  - job_name: 'container-monitoring-demo'\n    metrics_path: '/metrics'\n\n    static_configs:\n\n    # Relabel configurations\n    relabel_configs:\n      - source_labels: [__address__]\n        target_label: __param_target\n      - source_labels: [__param_target]\n        target_label: instance\n      - target_label: __address__\n        replacement: localhost:9090\n\n    # Metric relabeling\n    metric_relabel_configs:\n      - source_labels: [__name__]\n        regex: '(container_.*|process_.*|go_.*)'\n        action: keep\n      - source_labels: [__name__]\n        target_label: oci_namespace\n        replacement: 'container_monitoring'\n\n  # Docker container metrics (if available)\n  - job_name: 'docker'\n    metrics_path: '/metrics'\n    static_configs:\n\n    # Filter for Docker-specific metrics\n    metric_relabel_configs:\n      - source_labels: [__name__]\n        regex: '(container_.*|docker_.*)'\n        action: keep\n\n  # Node exporter metrics (system metrics)\n  - job_name: 'node'\n    metrics_path: '/metrics'\n    static_configs:\n\n    # Keep only relevant system metrics\n    metric_relabel_configs:\n      - source_labels: [__name__]\n        regex: '(node_cpu_.*|node_memory_.*|node_disk_.*|node_network_.*|node_filesystem_.*)'\n        action: keep\n",
            "content_base64": null,
            "content_base64sha256": "XfuhpwGpMTENUtcR79r1JiPw8F0YxApuOmldAbatyU0=",
            "content_base64sha512": "6qYbuCjk1GPV1kZzGwWsAmJHaKpKSG3uze2iHhqeeOT7ATCYCVV0hJakHf0v0EMLQ7rfHMlH37DODm0CDhWhfA==",
            "content_md5": "83b1f1b5fa78cc54cfc8a5c4cacaec32",
            "content_sha1": "e138ec3f14513e969c920509e1c472c5736d7c87",
            "content_sha256": "5dfba1a701a931310d52d711efdaf52623f0f05d18c40a6e3a695d01b6adc94d",
            "content_sha512": "eaa61bb828e4d463d5d646731b05ac02624768aa4a486deecdeda21e1a9e78e4fb0130980955748496a41dfd2fd0430b43badf1cc947dfb0ce0e6d020e15a17c",
            "directory_permission": "0777",
            "file_permission": "0644",
            "filename": "./output/prometheus-config.yml",
            "id": "e138ec3f14513e969c920509e1c472c5736d7c87",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "sensitive_content"
              }
            ]
          ],
          "dependencies": [
            "module.iam.oci_identity_dynamic_group.container_instance_dg",
            "module.iam.oci_identity_dynamic_group.management_agent_dg",
            "module.iam.oci_identity_policy.container_logging_policy",
            "module.iam.oci_identity_policy.container_resource_policy",
            "module.iam.oci_identity_policy.logging_service_policy",
            "module.iam.oci_identity_policy.mgmt_agent_metrics_policy",
            "module.iam.oci_identity_policy.monitoring_policy"
          ]
        }
      ]
    },
    {
      "module": "module.management_agent[0]",
      "mode": "managed",
      "type": "local_file",
      "name": "service_discovery_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "{\n  \"version\": \"1.0\",\n  \"type\": \"oci_container_instance\",\n  \"service_discovery\": {\n    \"container_instance\": {\n      \"ocid\": \"\",\n      \"private_ip\": \"\",\n      \"metrics_port\": 9090,\n      \"compartment_ocid\": \"ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq\"\n    },\n    \"targets\": [\n      {\n        \"target\": \":9090\",\n        \"labels\": {\n          \"job\": \"container-metrics\",\n          \"instance\": \"\",\n          \"environment\": \"production\"\n        }\n      }\n    ],\n    \"scrape_config\": {\n      \"interval\": \"60s\",\n      \"timeout\": \"10s\",\n      \"metrics_path\": \"/metrics\"\n    }\n  }\n}\n",
            "content_base64": null,
            "content_base64sha256": "Jy9EI9T2jSBniiG8IpUGMUXGDE4TQWGLvRtK42FjQ14=",
            "content_base64sha512": "gwOrqvjOmbSW3dVv4ysDvFeY38+uC5EzAifkd9Is5U150Ta38PEE9o2YOEWXMtEdn1fT3FWt8BelEcxj6dbdNQ==",
            "content_md5": "21212878e8fd429fd316ae44de0b4448",
            "content_sha1": "4e54178fab3db890e1ccb8b0e4b5b2ea8b6ec525",
            "content_sha256": "272f4423d4f68d20678a21bc2295063145c60c4e1341618bbd1b4ae36163435e",
            "content_sha512": "8303abaaf8ce99b496ddd56fe32b03bc5798dfcfae0b91330227e477d22ce54d79d136b7f0f104f68d9838459732d11d9f57d3dc55adf017a511cc63e9d6dd35",
            "directory_permission": "0777",
            "file_permission": "0644",
            "filename": "./output/service-discovery.json",
            "id": "4e54178fab3db890e1ccb8b0e4b5b2ea8b6ec525",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "sensitive_content"
              }
            ]
          ],
          "dependencies": [
            "module.iam.oci_identity_dynamic_group.container_instance_dg",
            "module.iam.oci_identity_dynamic_group.management_agent_dg",
            "module.iam.oci_identity_policy.container_logging_policy",
            "module.iam.oci_identity_policy.container_resource_policy",
            "module.iam.oci_identity_policy.logging_service_policy",
            "module.iam.oci_identity_policy.mgmt_agent_metrics_policy",
            "module.iam.oci_identity_policy.monitoring_policy"
          ]
        }
      ]
    },
    {
      "module": "module.management_agent[0]",
      "mode": "managed",
      "type": "oci_management_agent_management_agent_install_key",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/oci\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allowed_key_install_count": 10,
            "compartment_id": "ocid1.compartment.oc1..aaaaaaaagy3yddkkampnhj3cqm5ar7w2p7tuq5twbojyycvol6wugfav3ckq",
            "created_by_principal_id": "ocid1.user.oc1..aaaaaaaawlmnpsv76fbqs6bjdt4bmx5hpwnve3j77u6bwfk36ltdoaspbgpq",
            "current_key_install_count": 0,
            "defined_tags": {
              "CCA_Basic_Tag.email": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle-Standard.CostCenter": "Specialists",
              "Oracle_Tags.CreatedBy": "oracleidentitycloudservice/alexandru.birzu@oracle.com",
              "Oracle_Tags.CreatedOn": "2025-10-28T11:12:07.432Z"
            },
            "display_name": "container-agent-key",
            "freeform_tags": {},
            "id": "ocid1.managementagentinstallkey.oc1.eu-frankfurt-1.amaaaaaattkvkkiahbexff7xhpgnohakojieecaiisnrxvliar7mfsqki6wa",
            "is_unlimited": false,
            "key": "Mi4wLGV1LWZyYW5rZnVydC0xLG9jaWQxLnRlbmFuY3kub2MxLi5hYWFhYWFhYXh6cHhiY2FnN3pnYW1oMmVybGdncXJvM3k2M3R2bTJyYmtrano0ejJ6c2t2YWd1cGl6N2Esb2NpZDEubWFuYWdlbWVudGFnZW50aW5zdGFsbGtleS5vYzEuZXUtZnJhbmtmdXJ0LTEuYW1hYWFhYWF0dGt2a2tpYWhiZXhmZjd4aHBnbm9oYWtvamllZWNhaWlzbnJ4dmxpYXI3bWZzcWtpNndhLElBOVZYVnF1RFlRc1pMODFETVloaWsxZ2x0MllJYjlta1NRU0w2alo=",
            "lifecycle_details": null,
            "state": "ACTIVE",
            "system_tags": {},
            "time_created": "2025-10-28 11:12:07.568 +0000 UTC",
            "time_expires": "2026-10-28T11:12:07Z",
            "time_updated": "2025-10-28 11:12:07.568 +0000 UTC",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.iam.oci_identity_dynamic_group.container_instance_dg",
            "module.iam.oci_identity_dynamic_group.management_agent_dg",
            "module.iam.oci_identity_policy.container_logging_policy",
            "module.iam.oci_identity_policy.container_resource_policy",
            "module.iam.oci_identity_policy.logging_service_policy",
            "module.iam.oci_identity_policy.mgmt_agent_metrics_policy",
            "module.iam.oci_identity_policy.monitoring_policy"
          ]
        }
      ]
    }
  ],
  "check_results": [
    {
      "object_kind": "var",
      "config_addr": "module.container_instance.var.container_memory_gb",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.container_instance.var.container_memory_gb",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.container_instance.var.availability_domain",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.container_instance.var.availability_domain",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.logging.var.log_retention_days",
      "status": "pass",
      "objects": null
    },
    {
      "object_kind": "var",
      "config_addr": "module.container_instance.var.container_ocpus",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.container_instance.var.container_ocpus",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.container_instance.var.container_restart_policy",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.container_instance.var.container_restart_policy",
          "status": "pass"
        }
      ]
    },
    {
      "object_kind": "var",
      "config_addr": "module.container_instance.var.container_shape",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.container_instance.var.container_shape",
          "status": "pass"
        }
      ]
    }
  ]
}
